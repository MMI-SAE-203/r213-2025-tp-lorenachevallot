---
import Base from "../../layouts/Base.astro";
import { addOffre } from "../../backend.mjs";

let message = "";
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addOffre(formData);
    message = response.message;
}
---

<Base>
    <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-2xl font-semibold text-gray-800 mb-4">
            Ajouter une offre
        </h1>
        {message && <h2 class="text-green-600 font-medium">{message}</h2>}

        <form
            action="/offres/add"
            method="POST"
            enctype="multipart/form-data"
            class="space-y-4"
        >
            <input
                type="text"
                name="nomMaison"
                placeholder="Nom de la maison"
                required
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 outline-none"
            />

            <input
                type="number"
                name="prix"
                placeholder="Prix"
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 outline-none"
            />

            <input
                type="number"
                name="nombre_de_salles_de_bain"
                placeholder="Nombre de salles de bain"
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 outline-none"
            />

            <input
                type="number"
                name="nombre_de_chambres"
                placeholder="Nombre de chambres"
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 outline-none"
            />

            <input
                type="number"
                name="surface"
                placeholder="Superficie"
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 outline-none"
            />

            <input
                type="file"
                name="image"
                class="w-full p-3 border border-gray-300 rounded-md bg-gray-50 focus:ring-2 focus:ring-blue-400 outline-none"
            />

            <button
                type="submit"
                class="w-full bg-blue-900 text-white p-3 rounded-md hover:bg-blue-700 transition-all duration-200"
            >
                Ajouter
            </button>
        </form>
    </div>
</Base>
